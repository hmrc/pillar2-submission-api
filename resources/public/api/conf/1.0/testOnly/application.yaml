openapi: 3.0.3
info:
  version: 0.188.0
  title: Pillar 2 API
  description: An API for managing and retrieving data in accordance with Pillar 2 tax rules.
tags: []
paths:
  /organisations/pillar-two/setup/organisation:
    post:
      operationId: createTestOrganisation
      tags:
        - setup
      summary: Create Test Organisation
      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: "Pillar 2 Id - Pattern: [A-Z0-9]{1,15}"
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisationRequest"
            examples:
              CreateTestOrganisationRequestExample:
                $ref: "#/components/examples/requests.TestOrganisationRequestExample"
      responses:
        "201":
          description: Test Organisation Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisationWithId"
              examples:
                CreateTestOrganisationResponseExample:
                  $ref: "#/components/examples/responses.TestOrganisationResponseExample"
        "400":
          description: Invalid Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid JSON:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
                Invalid Date Range:
                  $ref: "#/components/examples/errors.InvalidDateRange"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Test Endpoint Disabled:
                  $ref: "#/components/examples/errors.TestOrg.EndpointDisabled"
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "409":
          description: Organisation Already Exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              example:
                code: 409
                message: "Organisation with pillar2Id: XAPLR1234567890 already exists"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              example:
                code: 500
                message: Failed to create organisation due to database error
      description: |
        Creates a test organisation associated with your authorised organisation.
      security:
        - userRestricted:
            - write:pillar2
    get:
      operationId: getTestOrganisation
      tags:
        - setup
      summary: Get Test Organisation
      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: "Pillar 2 Id - Pattern: [A-Z0-9]{1,15}"
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      responses:
        "200":
          description: Test Organisation Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisationWithId"
              examples:
                TestOrganisationResponseExample:
                  $ref: "#/components/examples/responses.TestOrganisationResponseExample"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Test Endpoint Disabled:
                  $ref: "#/components/examples/errors.TestOrg.EndpointDisabled"
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Not Found:
                  $ref: "#/components/examples/errors.TestOrg.NotFound"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              example:
                code: 500
                message: Internal Server Error
        "400":
          description: Invalid Request
          content:
            application/json:
              examples:
                Invalid JSON:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
      description: |
        Gets a test organisation associated with your authorised organisation.
      security:
        - userRestricted:
            - read:pillar2
    put:
      operationId: updateTestOrganisation
      tags:
        - setup
      summary: Update Test Organisation
      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: "Pillar 2 Id - Pattern: [A-Z0-9]{1,15}"
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisationRequest"
            examples:
              UpdateTestOrganisationRequestExample:
                $ref: "#/components/examples/requests.TestOrganisationRequestExample"
      responses:
        "200":
          description: Test Organisation Updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisationWithId"
              examples:
                UpdateTestOrganisationResponseExample:
                  $ref: "#/components/examples/responses.TestOrganisationResponseExample"
        "400":
          description: Invalid Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid JSON:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
                Invalid Date Range:
                  $ref: "#/components/examples/errors.InvalidDateRange"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Test Endpoint Disabled:
                  $ref: "#/components/examples/errors.TestOrg.EndpointDisabled"
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Not Found:
                  $ref: "#/components/examples/errors.TestOrg.NotFound"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              example:
                code: 500
                message: Failed to update organisation due to database error
      description: |
        Updates a test organisation associated with your authorised organisation.
      security:
        - userRestricted:
            - write:pillar2
    delete:
      operationId: deleteTestOrganisation
      tags:
        - setup
      summary: Delete Test Organisation
      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: "Pillar 2 Id - Pattern: [A-Z0-9]{1,15}"
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      responses:
        "204":
          description: Test Organisation and Submission Data Deleted Successfully
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Test Endpoint Disabled:
                  $ref: "#/components/examples/errors.TestOrg.EndpointDisabled"
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Not Found:
                  $ref: "#/components/examples/errors.TestOrg.NotFound"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              example:
                code: 500
                message: Failed to delete organisation and submission data
        "400":
          description: Invalid Request
          content:
            application/json:
              examples:
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
      description: |
        Deletes a test organisation associated with your authorised organisation.
      security:
        - userRestricted:
            - write:pillar2
  /organisations/pillar-two/setup/globe-information-return:
    post:
      operationId: createGIR
      tags:
        - setup
      summary: Create A Test GloBE Information Return
      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: "Pillar 2 Id - Pattern: [A-Z0-9]{1,15}"
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.globeinformationreturn.GIRSubmission"
            examples:
              CreateTestGlobeInformationReturnRequestExample:
                $ref: "#/components/examples/requests.CreateTestGlobeInformationReturnRequestExample"
      responses:
        "201":
          description: Globe Information Return Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.globeinformationreturn.GIRSuccess"
              examples:
                CreateTestGlobeInformationReturnResponseExample:
                  $ref: "#/components/examples/responses.CreateTestGlobeInformationReturnResponseExample"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid JSON:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "422":
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Request:
                  $ref: "#/components/examples/errors.Submission.InvalidRequest"
                No Active Subscription Found:
                  $ref: "#/components/examples/errors.Submission.NoActiveSubscription"
                Tax Obligation Fulfilled:
                  $ref: "#/components/examples/errors.Submission.TaxObligationFulfilled"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
                No Subscription Data:
                  $ref: "#/components/examples/errors.Submission.NoSubscriptionData"
      description: |
        Creates a GloBE Information Return for a test organisation.
      security:
        - userRestricted:
            - write:pillar2
  /organisations/pillar-two/uk-tax-return:
    post:
      operationId: submitUKTR
      tags:
        - submission
      summary: Submit UK Tax Return
      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          required: true
          name: X-Pillar2-Id
          schema:
            type: string
          description: Pillar2 ID for the submission
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.UKTRSubmissionData"
                - $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.UKTRSubmissionNilReturn"
            examples:
              NilReturnMneAndUk:
                $ref: "#/components/examples/requests.UKTRNilReturnMneAndUk"
              NilReturnDomesticOnlyWithUkGaap:
                $ref: "#/components/examples/requests.UKTRNilReturnDomesticOnlyWithUkGaap"
              NilReturnDomesticOnlyWithoutUkGaap:
                $ref: "#/components/examples/requests.UKTRNilReturnDomesticOnlyWithoutUkGaap"
              LiabilityReturnMneAndUkOneEntity:
                $ref: "#/components/examples/requests.UKTRLiabilityReturnMneAndUkWithOneEntity"
              LiabilityReturnMneAndUkTwoEntities:
                $ref: "#/components/examples/requests.UKTRLiabilityReturnMneAndUkWithTwoEntities"
              LiabilityReturnDomesticOneEntityUkGaap:
                $ref: "#/components/examples/requests.UKTRLiabilityReturnDomesticOnlyOneEntityAndUkGaap"
              LiabilityReturnDomesticTwoEntities:
                $ref: "#/components/examples/requests.UKTRLiabilityReturnDomesticOnlyTwoEntities"
      responses:
        "201":
          description: UK Tax Return Submission Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.responses.UKTRSubmitSuccessResponse"
              examples:
                responses.UKTRSuccessResponseWithCRNExample:
                  $ref: "#/components/examples/responses.UKTRSuccessResponseWithCrnExample"
                responses.UKTRSuccessResponseWithoutCrnExample:
                  $ref: "#/components/examples/responses.UKTRSuccessResponseWithoutCrnExample"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "422":
          description: Business Validation Failure
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid UTPR Election:
                  $ref: "#/components/examples/errors.Submission.InvalidUTPR"
                Invalid Total Liability IIR:
                  $ref: "#/components/examples/errors.Submission.InvalidTotalLiabilityIIR"
                Invalid DTT Election:
                  $ref: "#/components/examples/errors.Submission.InvalidDTT"
                Invalid Return:
                  $ref: "#/components/examples/errors.Submission.InvalidReturn"
                Invalid Request:
                  $ref: "#/components/examples/errors.Submission.InvalidRequest"
                Invalid Total Liability UTPR:
                  $ref: "#/components/examples/errors.Submission.InvalidTotalLiabilityUTPR"
                Invalid Total Liability:
                  $ref: "#/components/examples/errors.Submission.InvalidTotalLiability"
                Tax Obligation Fulfilled:
                  $ref: "#/components/examples/errors.Submission.TaxObligationFulfilled"
                No Active Subscription:
                  $ref: "#/components/examples/errors.Submission.NoActiveSubscription"
                Invalid Total Liability DTT:
                  $ref: "#/components/examples/errors.Submission.InvalidTotalLiabilityDTT"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Json:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Request Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Missing Header:
                  $ref: "#/components/examples/errors.Submission.MissingPillar2Header"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
                No Subscription Data:
                  $ref: "#/components/examples/errors.Submission.NoSubscriptionData"
      description: |
        Submits a UK Tax Return for a specified accounting period.
        ### Error Codes
        <p>This table contains a list of 422 error codes returned when a SubmitUKTR or AmendUKTR request is not processed successfully.</p>
        <table>
        <thead>
        <tr>
        <th>Error Message</th>
        <th>Next Steps</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>003 - Request could not be processed</td>
        <td>The message could not be processed due to locking. Please check if there is currently an open enquiry on your tax account. If you are amending an existing return, please check the request dates fall within the amendment window (12 months after the due date, minus 1 day).</td>
        </tr>
        <tr>
        <td>044 - Tax Obligation already fulfilled</td>
        <td>A UKTR for the specified period has already been submitted. If you are trying to amend a UKTR, please check you are sending the <em>amendUKTR</em> API request.</td>
        </tr>
        <tr>
        <td>063 - Business partner does not have an Active Subscription for this Regime</td>
        <td>The Pillar 2 ID in the request header is not listed as active by HMRC for this regime. Please contact the central support team.</td>
        </tr>
        <tr>
        <td>093 - Invalid Return</td>
        <td>There is an error with the tax return you’ve submitted in the request. Entities registered as UK only should check that <em>obligationMTT</em> is set to false, and <em>totalLiabilityIIR</em>, <em>amountOwedIIR</em>, <em>totalLiabilityUTPR</em> and <em>amountOwedUTPR</em> should be set to 0. The <em>accountingPeriodFrom</em> and <em>accountingPeriodTo</em> date range should match the period defined in the test organisation. If you need to check or amend the accounting period pattern, you can do this on the Pillar 2 site under “Personal Details”.</td>
        </tr>
        <tr>
        <td>094 - Invalid DTT Election</td>
        <td>The DTT values in the request are invalid. Please complete the following checks, then submit the request again. If <em>electionDTTSingleMember</em> is true, the <em>numberSubGroupDTT</em> should be greater than 0. This number represents the number of liable entities that owe a DTT amount greater than 0. The total number of liable entities who owe DTT in the payload should be the same as the number in <em>numberSubGroupDTT</em>.</td>
        </tr>
        <tr>
        <td>095 - Invalid UTPR Election</td>
        <td>The UTPR values in the request are invalid. Please complete the following checks, then submit the request again. If <em>electionUTPRSingleMember</em> is true, the <em>numberSubGroupUTPR</em> should be greater than 0. This number represents the number of liable entities that owe a UTPR amount greater than 0. The total number of liable entities who owe UTPR in the payload should be the same as the number in <em>numberSubGroupUTPR</em>.</td>
        </tr>
        <tr>
        <td>096 - Invalid Total Liability</td>
        <td>The <em>totalLiability</em> value in the request does not match the combined values of <em>totalLiabilityDTT</em>, <em>totalLiabilityIIR</em> and <em>totalLiabilityUTPR</em>. Please check the sum of these fields matches the <em>totalLiability</em> value and submit the request again.</td>
        </tr>
        <tr>
        <td>097 - Invalid Total Liability IIR</td>
        <td>The <em>totalLiabilityIIR</em> value does not match the <em>amountIIR value</em> from the <em>liableEntities</em> array. IIR values should only be entered by entities registered as a Multinational Enterprise. Please check the individual totals of each entity and submit the request again.</td>
        </tr>
        <tr>
        <td>098 - Invalid Total Liability DTT</td>
        <td>The <em>totalLiabilityDTT</em> value does not match the <em>amountDTT</em> value from the <em>liableEntities</em> array. Please check the value of these fields matches and submit the request again.</td>
        </tr>
        <tr>
        <td>099 - Invalid Total Liability UTPR</td>
        <td>The <em>totalLiabilityUTPR</em> value does not match the <em>amountUTPR</em> value from the <em>liableEntities</em> array. UTPR values should only be entered by entities registered as a Multinational Enterprise. Please check the individual totals of each entity and submit the request again.</td>
        </tr>
        </tbody>
        </table>
      security:
        - userRestricted:
            - write:pillar2
    put:
      operationId: amendUKTR
      tags:
        - submission
      summary: Amend UK Tax Return
      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: Pillar2 ID for the submission
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.UKTRSubmissionData"
                - $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.UKTRSubmissionNilReturn"
            examples:
              NilReturnMneAndUk:
                $ref: "#/components/examples/requests.UKTRNilReturnMneAndUk"
              NilReturnDomesticOnlyWithUkGaap:
                $ref: "#/components/examples/requests.UKTRNilReturnDomesticOnlyWithUkGaap"
              NilReturnDomesticOnlyWithoutUkGaap:
                $ref: "#/components/examples/requests.UKTRNilReturnDomesticOnlyWithoutUkGaap"
              LiabilityReturnMneAndUkOneEntity:
                $ref: "#/components/examples/requests.UKTRLiabilityReturnMneAndUkWithOneEntity"
              LiabilityReturnMneAndUkTwoEntities:
                $ref: "#/components/examples/requests.UKTRLiabilityReturnMneAndUkWithTwoEntities"
              LiabilityReturnDomesticOneEntityUkGaap:
                $ref: "#/components/examples/requests.UKTRLiabilityReturnDomesticOnlyOneEntityAndUkGaap"
              LiabilityReturnDomesticTwoEntities:
                $ref: "#/components/examples/requests.UKTRLiabilityReturnDomesticOnlyTwoEntities"
      responses:
        "200":
          description: UK Tax Return Submission Updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.responses.UKTRSubmitSuccessResponse"
              examples:
                responses.UKTRSuccessResponseWithCRNExample:
                  $ref: "#/components/examples/responses.UKTRSuccessResponseWithCrnExample"
                responses.UKTRSuccessResponseWithoutCrnExample:
                  $ref: "#/components/examples/responses.UKTRSuccessResponseWithoutCrnExample"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "422":
          description: Business Validation Failure
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid UTPR Election:
                  $ref: "#/components/examples/errors.Submission.InvalidUTPR"
                Invalid Total Liability IIR:
                  $ref: "#/components/examples/errors.Submission.InvalidTotalLiabilityIIR"
                Invalid DTT Election:
                  $ref: "#/components/examples/errors.Submission.InvalidDTT"
                Invalid Return:
                  $ref: "#/components/examples/errors.Submission.InvalidReturn"
                Invalid Request:
                  $ref: "#/components/examples/errors.Submission.InvalidRequest"
                Invalid Total Liability UTPR:
                  $ref: "#/components/examples/errors.Submission.InvalidTotalLiabilityUTPR"
                Invalid Total Liability:
                  $ref: "#/components/examples/errors.Submission.InvalidTotalLiability"
                No Active Subscription:
                  $ref: "#/components/examples/errors.Submission.NoActiveSubscription"
                Invalid Total Liability DTT:
                  $ref: "#/components/examples/errors.Submission.InvalidTotalLiabilityDTT"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Json:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Request Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Missing Header:
                  $ref: "#/components/examples/errors.Submission.MissingPillar2Header"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
                No Subscription Data:
                  $ref: "#/components/examples/errors.Submission.NoSubscriptionData"
      description: "Amends a UK tax return submitted for a specified accounting period.   \n\n### Error Codes\n<p>AmendUKTR generates the same error codes as Submit UKTR, please use the Error Codes table in the SubmitUKTR section above.</p>\n"
      security:
        - userRestricted:
            - write:pillar2
  /organisations/pillar-two/below-threshold-notification:
    post:
      operationId: submitBTN
      tags:
        - submission
      summary: Submit Below-Threshold Notification
      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: Pillar2 ID for the submission
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.belowthresholdnotification.BTNSubmission"
            examples:
              requests.BTNRequestExample:
                $ref: "#/components/examples/requests.BTNRequestExample"
      responses:
        "201":
          description: Below-Threshold Notification Submission Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.belowthresholdnotification.SubmitBTNSuccessResponse"
              examples:
                responses.BTNSuccessResponseExample:
                  $ref: "#/components/examples/responses.BTNSuccessResponseExample"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "422":
          description: Business Validation Failure
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Request:
                  $ref: "#/components/examples/errors.Submission.InvalidRequest"
                Tax Obligation Fulfilled:
                  $ref: "#/components/examples/errors.Submission.TaxObligationFulfilled"
                No Active Subscription:
                  $ref: "#/components/examples/errors.Submission.NoActiveSubscription"
                Accounting Period Under Enquiry:
                  $ref: "#/components/examples/errors.Submission.AccountingPeriodUnderEnquiry"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
                No Subscription Data:
                  $ref: "#/components/examples/errors.Submission.NoSubscriptionData"
        "400":
          description: Bad Request
          content:
            application/json:
              examples:
                Invalid Json:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Request Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Missing Header:
                  $ref: "#/components/examples/errors.Submission.MissingPillar2Header"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
      description: |
        Submits a Below-Threshold Notification for a specified accounting period when the group no longer meets the threshold for the Pillar 2 top-up tax.
        ### Error Codes
        <p>This table contains a list of 422 error codes returned when a SubmitBTN request is not processed successfully.</p>
        <table>
        <thead>
        <tr>
        <th>Error Message</th>
        <th>Next Steps</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>003 - Request could not be processed</td>
        <td>The message could not be processed due to locking. Please check if there is currently an open enquiry on your tax account.</td>
        </tr>
        <tr>
        <td>044 - Tax Obligation already fulfilled</td>
        <td>A BTN for the specified period has already been submitted.</td>
        </tr>
        <tr>
        <td>063 - Business partner does not have an Active Subscription for this Regime</td>
        <td>The Pillar 2 ID in the request header is not listed as active by HMRC for this regime. Please contact the central support team.</td>
        </tr>
        <tr>
        <td>100 - Accounting period under enquiry</td>
        <td>A BTN cannot be submitted for this particular accounting period as it is currently subject to an HMRC enquiry.</td>
        </tr>
        </tbody>
        </table>
      security:
        - userRestricted:
            - write:pillar2
  /organisations/pillar-two/obligations-and-submissions:
    get:
      operationId: retrieveData
      tags:
        - submission
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
        - in: query
          name: toDate
          required: true
          schema:
            type: string
      summary: Retrieve Obligations and Submissions
      description: |
        Retrieves the Obligations and Submissions for an accounting period.
        ### Error Codes
        <p>This table contains a list of 422 error codes returned when a Retrieve Obligations and Submissions request is not processed successfully.</p>
        <table>
        <thead>
        <tr>
        <th>Error Message</th>
        <th>Next Steps</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>003 - Request could not be processed</td>
        <td>The message could not be processed due to locking. Please check if there is currently an open enquiry on your tax account.</td>
        </tr>
        <tr>
        <td>014 - No data found</td>
        <td>No data found for this Pillar 2 ID.</td>
        </tr>
        <tr>
        </tbody>
        </table>
      responses:
        "500":
          description: Internal Server Error
          content:
            application/json:
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
        "403":
          description: Forbidden
          content:
            application/json:
              examples:
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "422":
          description: Business Validation Failure
          content:
            application/json:
              examples:
                Invalid Request:
                  $ref: "#/components/examples/errors.Submission.InvalidRequest"
                No Data Found:
                  $ref: "#/components/examples/errors.Submission.NoDataFound"
        "401":
          description: Unauthorized
          content:
            application/json:
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "400":
          description: Invalid Request
          content:
            application/json:
              examples:
                Invalid Date Range:
                  $ref: "#/components/examples/errors.InvalidDateRange"
                Invalid Date Format:
                  $ref: "#/components/examples/errors.InvalidDateFormat"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
        "200":
          description: OK Obligations and Submissions retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ObligationsAndSubmissionsSuccessResponse"
      security:
        - userRestricted:
            - read:pillar2
  /organisations/pillar-two/overseas-return-notification:
    post:
      operationId: submitORN
      tags:
        - submission
      summary: Submit Overseas Return Notification
      parameters:
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: Pillar2 ID for the submission.
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.overseasreturnnotification.ORNSubmission"
            examples:
              requests.ORNRequestExample:
                $ref: "#/components/examples/requests.ORNRequestExample"
      responses:
        "201":
          description: Overseas Return Notification Submission Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.overseasreturnnotification.ORNSuccessResponse"
              examples:
                responses.ORNSuccessResponseExample:
                  $ref: "#/components/examples/responses.ORNSuccessResponseExample"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "422":
          description: Business Validation Failure
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Request:
                  $ref: "#/components/examples/errors.Submission.InvalidRequest"
                No Active Subscription Found:
                  $ref: "#/components/examples/errors.Submission.NoActiveSubscription"
                Tax Obligation Fulfilled:
                  $ref: "#/components/examples/errors.Submission.TaxObligationFulfilled"
                Invalid Return:
                  $ref: "#/components/examples/errors.Submission.InvalidReturn"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Json:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Request Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Missing Header:
                  $ref: "#/components/examples/errors.Submission.MissingPillar2Header"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
                No Subscription Data:
                  $ref: "#/components/examples/errors.Submission.NoSubscriptionData"
      description: "Submits an Overseas Return Notification for an accounting period.\n### Error Codes\n<p>This table contains a list of 422 error codes returned when a Submit Overseas Return Notification request is not processed successfully.</p> \n<table>\n<thead>\n<tr>\n<th>Error Message</th>\n<th>Next Steps</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>003 - Request could not be processed</td>\n<td>The message could not be processed due to locking. Please make the following checks. Confirm if there is currently an open enquiry on your tax account. The <em>accountingPeriodFrom</em> and <em>accountingPeriodTo</em> date range should match the period defined in your test organisation. The <em>filedDateGIR</em> date should not be in the future. The <em>countryGIR</em> and <em>issuingCountryTIN</em> fields must conform to the ISO-3166 standard for country codes. In the organisation’s settings, the <em>accountStatus</em> should have the <em>inactive</em> flag set to “false\".\n</td>\n</tr>\n<tr>\n<td>044 - Tax Obligation already fulfilled</td>\n<td>A BTN for the specified period has already been submitted.</td>\n</tr>\n<tr>\n<td>063 - Business Partner does not have an Active Subscription for this Regime</td>\n<td>The Pillar 2 ID in the request header is not listed as active by HMRC for this regime. Please contact the central support team.</td>\n</tr>\n<tr>\n<td>093 - Invalid Return</td>\n<td>There is an error with the return you’ve submitted in the request.</td>\n</tr>\n</tbody>\n</table>\n"
      security:
        - userRestricted:
            - write:pillar2
    put:
      operationId: amendORN
      tags:
        - submission
      summary: Amend Overseas Return Notification
      parameters:
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: Pillar2 ID for the submission.
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.overseasreturnnotification.ORNSubmission"
            examples:
              requests.ORNRequestExample:
                $ref: "#/components/examples/requests.ORNRequestExample"
      responses:
        "200":
          description: Overseas Return Notification Submission Amended
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.overseasreturnnotification.ORNSuccessResponse"
              examples:
                responses.ORNSuccessResponseExample:
                  $ref: "#/components/examples/responses.ORNSuccessResponseExample"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "422":
          description: Business Validation Failure
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Request:
                  $ref: "#/components/examples/errors.Submission.InvalidRequest"
                No Active Subscription Found:
                  $ref: "#/components/examples/errors.Submission.NoActiveSubscription"
                Invalid Return:
                  $ref: "#/components/examples/errors.Submission.InvalidReturn"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Json:
                  $ref: "#/components/examples/errors.InvalidJson"
                Empty Request Body:
                  $ref: "#/components/examples/errors.EmptyBody"
                Missing Header:
                  $ref: "#/components/examples/errors.Submission.MissingPillar2Header"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
                No Subscription Data:
                  $ref: "#/components/examples/errors.Submission.NoSubscriptionData"
      description: "Amends an Overseas Return Notification for an accounting period.\n### Error Codes\n<p>This table contains a list of 422 error codes returned when an Amend Overseas Return Notification request is not processed successfully.</p> \n<table>\n<thead>\n<tr>\n<th>Error Message</th>\n<th>Next Steps</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>003 - Request could not be processed</td>\n<td>The message could not be processed due to locking. Please make the following checks. Confirm if there is currently an open enquiry on your tax account. The <em>accountingPeriodFrom</em> and <em>accountingPeriodTo</em> date range should match the period defined in your test organisation. The <em>filedDateGIR</em> date should not be in the future. The <em>countryGIR</em> and <em>issuingCountryTIN</em> fields must conform to the ISO-3166 standard for country codes. In the organisation’s settings, the <em>accountStatus</em> should have the <em>inactive</em> flag set to “false\".\n</td>\n</tr>\n<tr>\n<td>063 - Business Partner does not have an Active Subscription for this Regime</td>\n<td>The Pillar 2 ID in the request header is not listed as active by HMRC for this regime. Please contact the central support team.</td>\n</tr>\n<tr>\n<td>093 - Invalid Return</td>\n<td>There is an error with the return you’ve submitted in the request.</td>\n</tr>\n</tbody>\n</table>\n"
      security:
        - userRestricted:
            - write:pillar2
    get:
      operationId: retrieveORN
      tags:
        - submission
      summary: Retrieve Overseas Return Notification
      parameters:
        - in: query
          name: accountingPeriodFrom
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: accountingPeriodTo
          required: true
          schema:
            type: string
            format: date
          description: Period end date
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
          description: Bearer token for authentication
        - in: header
          name: X-Pillar2-Id
          required: true
          schema:
            type: string
          description: Pillar2 ID for the submission
        - in: header
          name: Accept
          required: false
          schema:
            type: string
            example: application/vnd.hmrc.1.0+json
          description: "Specifies the expected response format as versioned JSON from the HMRC API (v1.0). If not provided, it will default to application/vnd.hmrc.1.0+json."
      responses:
        "200":
          description: Overseas Return Notification Retrieved Successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.overseasreturnnotification.ORNRetrieveSuccessResponse"
              examples:
                responses.ORNSuccessResponseExample:
                  $ref: "#/components/examples/responses.ORNRetrieveSuccessResponseExample"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
                Invalid Credentials:
                  $ref: "#/components/examples/errors.InvalidCredentials"
        "422":
          description: Business Validation Failure
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Request:
                  $ref: "#/components/examples/errors.Submission.InvalidRequest"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Date Range:
                  $ref: "#/components/examples/errors.InvalidDateRange"
                Invalid Date Format:
                  $ref: "#/components/examples/errors.InvalidDateFormat"
                Incorrect Header Value:
                  $ref: "#/components/examples/errors.IncorrectHeaderValue"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Scope:
                  $ref: "#/components/examples/errors.InvalidScope"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                NotFound:
                  $ref: "#/components/examples/errors.Retrieval.NotFound"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
      description: |
        Retrieves an Overseas Return Notification for an accounting period.
        ### Error Codes
        <p>This table contains a list of 422 error codes returned when a Retrieve Overseas Return Notification request is not processed successfully.</p>
        <table>
        <thead>
        <tr>
        <th>Error Message</th>
        <th>Next Steps</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>003 - Request could not be processed</td>
        <td>The message could not be processed due to locking. Please check if there is currently an open enquiry on your tax account.</td>
        </tr>
        </tbody>
        </table>
      security:
        - userRestricted:
            - read:pillar2
  /organisations/pillar-two/account-activity:
    get:
      operationId: retrieveAccountActivity
      tags:
        - submission
      summary: Retrieve Account Activity
      parameters:
        - name: fromDate
          in: query
          description: Filter results from this date (YYYY-MM-DD)
          required: false
          schema:
            type: string
            format: date
        - name: toDate
          in: query
          description: Filter results to this date (YYYY-MM-DD)
          required: false
          schema:
            type: string
            format: date
      responses:
        "200":
          description: Account Activity retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.accountactivity.AccountActivitySuccessResponse"
                properties:
                  success:
                    $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.accountactivity.AccountActivitySuccessResponse"
              examples:
                DttCharge:
                  $ref: "#/components/examples/responses.AccountActivity.DttCharge"
                FullyPaidCharge:
                  $ref: "#/components/examples/responses.AccountActivity.FullyPaidCharge"
                FullyPaidChargeWithSplitPayments:
                  $ref: "#/components/examples/responses.AccountActivity.FullyPaidChargeWithSplitPayments"
                RepaymentInterest:
                  $ref: "#/components/examples/responses.AccountActivity.RepaymentInterest"
                DttDetermination:
                  $ref: "#/components/examples/responses.AccountActivity.DttDetermination"
                DttIirUtpr:
                  $ref: "#/components/examples/responses.AccountActivity.DttIirUtpr"
                AccruedInterest:
                  $ref: "#/components/examples/responses.AccountActivity.AccruedInterest"
                DttIirUtprInterest:
                  $ref: "#/components/examples/responses.AccountActivity.DttIirUtprInterest"
                DttIirUtprDetermination:
                  $ref: "#/components/examples/responses.AccountActivity.DttIirUtprDetermination"
                DttIirUtprDiscovery:
                  $ref: "#/components/examples/responses.AccountActivity.DttIirUtprDiscovery"
                DttIirUtprOverpaidClaim:
                  $ref: "#/components/examples/responses.AccountActivity.DttIirUtprOverpaidClaim"
                UktrDttLateFilingPenalty:
                  $ref: "#/components/examples/responses.AccountActivity.UktrDttLateFilingPenalty"
                OrnGirLateFilingPenalty:
                  $ref: "#/components/examples/responses.AccountActivity.OrnGirLateFilingPenalty"
                PotentialLostRevenuePenalty:
                  $ref: "#/components/examples/responses.AccountActivity.PotentialLostRevenuePenalty"
                Schedule36Penalty:
                  $ref: "#/components/examples/responses.AccountActivity.Schedule36Penalty"
                RecordKeepingPenalty:
                  $ref: "#/components/examples/responses.AccountActivity.RecordKeepingPenalty"
                RepaymentCredit:
                  $ref: "#/components/examples/responses.AccountActivity.RepaymentCredit"
                InterestRepaymentCredit:
                  $ref: "#/components/examples/responses.AccountActivity.InterestRepaymentCredit"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Missing Credentials:
                  $ref: "#/components/examples/errors.MissingCredentials"
        "422":
          description: Business Validation Failure
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                No Data Found:
                  $ref: "#/components/examples/errors.Submission.NoDataFound"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Invalid Json:
                  $ref: "#/components/examples/errors.InvalidJson"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse"
              examples:
                Generic Server Error:
                  $ref: "#/components/examples/errors.Submission.GenericServerError"
      security:
        - userRestricted:
            - read:pillar2
components:
  schemas:
    uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.LiableEntity:
      properties:
        ukChargeableEntityName:
          type: string
          minLength: 1
          maxLength: 160
        idType:
          type: string
          minLength: 1
          maxLength: 4
        idValue:
          type: string
          minLength: 1
          maxLength: 15
        amountOwedDTT:
          type: number
          format: double
          minimum: 0
          maximum: 9.99999999999999E12
          multipleOf: 0.01
        amountOwedIIR:
          type: number
          format: double
          minimum: 0
          maximum: 9.99999999999999E12
          multipleOf: 0.01
        amountOwedUTPR:
          type: number
          format: double
          minimum: 0
          maximum: 9.99999999999999E12
          multipleOf: 0.01
      required:
        - ukChargeableEntityName
        - idType
        - idValue
        - amountOwedDTT
        - amountOwedIIR
        - amountOwedUTPR
    uk.gov.hmrc.pillar2submissionapi.models.accountactivity.AccountActivityClearance:
      properties:
        transactionDesc:
          type: string
          description: Description of the child transaction that took place.
        chargeRefNo:
          type: string
          nullable: true
          description: Reference for the child transaction's relevant charge kind.
        dueDate:
          nullable: true
          type: string
          format: date
          description: Date the child transaction must be settled by.
        amount:
          type: number
          format: double
          description: Portion of the child transaction which is allocated against the parent.
          minimum: -9.999999999999E10
          maximum: 9.999999999999E10
          multipleOf: 0.01
        clearingDate:
          type: string
          format: date
          description: Date the child transaction cleared against the parent.
        clearingReason:
          type: string
          nullable: true
          description: Reason the child transaction cleared against the parent.
      required:
        - transactionDesc
        - amount
        - clearingDate
      description: Information on how another transaction is allocated against the parent transaction.
    uk.gov.hmrc.pillar2submissionapi.models.accountactivity.AccountActivityTransaction:
      properties:
        transactionType:
          type: string
          description: The form of transaction that took place. Examples include 'Credit' 'Debit' and 'Payment'.
        transactionDesc:
          type: string
          description: Description of a transaction that took place.
        startDate:
          nullable: true
          type: string
          format: date
          description: Start date of the relevant accounting period.
        endDate:
          nullable: true
          type: string
          format: date
          description: End date of the relevant accounting period.
        accruedInterest:
          type: number
          format: double
          nullable: true
          description: "Interest accrued by delayed payment of this transaction, in GBP."
          minimum: 0
          maximum: 9.999999999999E10
          multipleOf: 0.01
        chargeRefNo:
          type: string
          nullable: true
          description: Reference for the relevant charge kind.
        transactionDate:
          type: string
          format: date
          description: Date of the transaction.
        dueDate:
          nullable: true
          type: string
          format: date
          description: Date the transaction must be settled by.
        originalAmount:
          type: number
          format: double
          description: "The original monetary value of the transaction, in GBP."
          minimum: -9.999999999999E10
          maximum: 9.999999999999E10
          multipleOf: 0.01
        outstandingAmount:
          type: number
          format: double
          nullable: true
          description: "The unresolved monetary value of the transaction, in GBP."
          minimum: -9.999999999999E10
          maximum: 9.999999999999E10
          multipleOf: 0.01
        clearedAmount:
          type: number
          format: double
          nullable: true
          description: "The resolved monetary value of the transaction, in GBP."
          minimum: -9.9999999999E8
          maximum: 9.9999999999E8
          multipleOf: 0.01
        standOverAmount:
          type: number
          format: double
          nullable: true
          description: The portion of the transaction's monetary value (in GBP) for which collection is postponed.
          minimum: -9.9999999999E8
          maximum: 9.9999999999E8
          multipleOf: 0.01
        appealFlag:
          type: boolean
          nullable: true
          description: Indicates that the transaction is currently under appeal when present and true.
        clearingDetails:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.accountactivity.AccountActivityClearance"
          description: Information on how other transactions are allocated against this one.
      required:
        - transactionType
        - transactionDesc
        - transactionDate
        - originalAmount
      description: Represents a record of a change to a Pillar ID's circumstances.
    uk.gov.hmrc.pillar2submissionapi.models.accountactivity.AccountActivitySuccessResponse:
      properties:
        processingDate:
          type: string
          format: date-time
          description: The date and time that an event took place.
        transactionDetails:
          type: array
          items:
            $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.accountactivity.AccountActivityTransaction"
          description: Records of a change to a Pillar ID's circumstances from the chosen time period.
      required:
        - processingDate
        - transactionDetails
    uk.gov.hmrc.pillar2submissionapi.models.overseasreturnnotification.ORNRetrieveSuccessResponse:
      properties:
        processingDate:
          type: string
          description: The date and time that an event took place.
        accountingPeriodFrom:
          type: string
          description: The calendar date upon which a business' accounting period begins.
        accountingPeriodTo:
          type: string
          description: The calendar date upon which a business' accounting period ends.
        filedDateGIR:
          type: string
          description: The date upon which the GloBE Information Return (GIR) was filed or submitted.
        countryGIR:
          type: string
          description: The country in which the GloBE Information Return (GIR) was submitted.
        reportingEntityName:
          type: string
          description: The name of the company that submitted the Overseas Return Notification (ORN).
        TIN:
          type: string
          description: The Tax Identification Number of the entity that submitted the Overseas Return Notification.
        issuingCountryTIN:
          type: string
          description: The country in which the Tax Identification Number was issued.
      required:
        - processingDate
        - accountingPeriodFrom
        - accountingPeriodTo
        - filedDateGIR
        - countryGIR
        - reportingEntityName
        - TIN
        - issuingCountryTIN
    uk.gov.hmrc.pillar2submissionapi.models.overseasreturnnotification.ORNSuccessResponse:
      properties:
        processingDate:
          type: string
          description: The date and time that an event took place.
        formBundleNumber:
          type: string
          description: "A unique identifier for the request, to be noted and retained in case amendments need to be filed against the return."
      required:
        - processingDate
        - formBundleNumber
    uk.gov.hmrc.pillar2submissionapi.models.overseasreturnnotification.ORNSubmission:
      properties:
        accountingPeriodFrom:
          type: string
          format: date
          description: The calendar date upon which a business' accounting period begins.
        accountingPeriodTo:
          type: string
          format: date
          description: The calendar date upon which a business' accounting period ends.
        filedDateGIR:
          type: string
          format: date
          description: The date upon which the GloBE Information Return (GIR) was filed or submitted.
        countryGIR:
          type: string
          minLength: 1
          maxLength: 2
          description: The country in which the GloBE Information Return (GIR) was submitted.
        reportingEntityName:
          type: string
          minLength: 1
          maxLength: 200
          description: The name of the company that submitted the Overseas Return Notification (ORN).
        TIN:
          type: string
          minLength: 1
          maxLength: 200
          description: The Tax Identification Number of the entity submitting the Overseas Return Notification.
        issuingCountryTIN:
          type: string
          minLength: 1
          maxLength: 2
          description: The country in which the Tax Identification Number was issued.
      required:
        - accountingPeriodFrom
        - accountingPeriodTo
        - filedDateGIR
        - countryGIR
        - reportingEntityName
        - TIN
        - issuingCountryTIN
    uk.gov.hmrc.pillar2submissionapi.models.belowthresholdnotification.SubmitBTNSuccessResponse:
      properties:
        processingDate:
          type: string
      required:
        - processingDate
    uk.gov.hmrc.pillar2submissionapi.models.belowthresholdnotification.BTNSubmission:
      properties:
        accountingPeriodFrom:
          type: string
          format: date
          description: The calendar date upon which a business' accounting period begins.
        accountingPeriodTo:
          type: string
          format: date
          description: The calendar date upon which a business' accounting period ends.
      required:
        - accountingPeriodFrom
        - accountingPeriodTo
    uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.responses.UKTRSubmitSuccessResponse:
      properties:
        processingDate:
          type: string
          format: date-time
          description: The date and time that an event took place.
        formBundleNumber:
          type: string
          description: "A unique identifier for the request, to be noted and retained in case amendments need to be filed against the return."
        chargeReference:
          type: string
          nullable: true
          description: Identifier for any liabilities specified in the return. Nil returns do not return a charge reference.
      required:
        - processingDate
        - formBundleNumber
    uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.LiabilityNilReturn:
      properties:
        returnType:
          type: string
          enum:
            - NIL_RETURN
      required:
        - returnType
      description: |
        A liability is a return for UKTR per accounting period which needs to be submitted (unless a BTN has been submitted). This is to be returned annually, and certain groups will need to submit this, whereas others will not.
        For the groups which do not need to submit a liability return, the value will be nil.
        For the groups which do need to submit an annual liability return, then the information found in the array will need to be populated.
    uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.UKTRSubmissionNilReturn:
      properties:
        accountingPeriodFrom:
          type: string
          format: date
          description: The calendar date upon which a business' accounting period begins.
        accountingPeriodTo:
          type: string
          format: date
          description: The calendar date upon which a business' accounting period ends.
        obligationMTT:
          type: boolean
          description: "Specifies whether a multinational group owes IIR or UTPR Pillar 2 tax. In the case where a group is 'domestic only', then the value must be `false`."
        electionUKGAAP:
          type: boolean
          description: "A means of calculating tax liability and profit. For domestic-only groups, the value must be `true`. For multinational groups, it must be `false`."
        liabilities:
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.LiabilityNilReturn"
      required:
        - accountingPeriodFrom
        - accountingPeriodTo
        - obligationMTT
        - electionUKGAAP
        - liabilities
    uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.LiabilityData:
      properties:
        electionDTTSingleMember:
          type: boolean
        electionUTPRSingleMember:
          type: boolean
        numberSubGroupDTT:
          type: integer
          format: int32
        numberSubGroupUTPR:
          type: integer
          format: int32
        totalLiability:
          type: number
          format: double
          minimum: 0
          maximum: 9.99999999999999E12
          multipleOf: 0.01
        totalLiabilityDTT:
          type: number
          format: double
          minimum: 0
          maximum: 9.99999999999999E12
          multipleOf: 0.01
        totalLiabilityIIR:
          type: number
          format: double
          minimum: 0
          maximum: 9.99999999999999E12
          multipleOf: 0.01
        totalLiabilityUTPR:
          type: number
          format: double
          minimum: 0
          maximum: 9.99999999999999E12
          multipleOf: 0.01
        liableEntities:
          type: array
          minItems: 1
          items:
            $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.LiableEntity"
      required:
        - electionDTTSingleMember
        - electionUTPRSingleMember
        - numberSubGroupDTT
        - numberSubGroupUTPR
        - totalLiability
        - totalLiabilityDTT
        - totalLiabilityIIR
        - totalLiabilityUTPR
        - liableEntities
      description: |
        A liability is a return for UKTR per accounting period which needs to be submitted (unless a BTN has been submitted). This is to be returned annually, and certain groups will need to submit this, whereas others will not.
        For the groups which do not need to submit a liability return, the value will be nil.
        For the groups which do need to submit an annual liability return, then the information found in the array will need to be populated.
    uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.UKTRSubmissionData:
      properties:
        accountingPeriodFrom:
          type: string
          format: date
          description: The calendar date upon which a business' accounting period begins.
        accountingPeriodTo:
          type: string
          format: date
          description: The calendar date upon which a business' accounting period ends.
        obligationMTT:
          type: boolean
          description: "Specifies whether a multinational group owes IIR or UTPR Pillar 2 tax. In the case where a group is 'domestic only', then the value must be `false`."
        electionUKGAAP:
          type: boolean
          description: "A means of calculating tax liability and profit. For domestic-only groups, the value must be `true`. For multinational groups, it must be `false`."
        liabilities:
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.uktrsubmissions.LiabilityData"
      required:
        - accountingPeriodFrom
        - accountingPeriodTo
        - obligationMTT
        - electionUKGAAP
        - liabilities
      description: |
        A liability is a return for UKTR per accounting period which needs to be submitted (unless a BTN has been submitted). This is to be returned annually, and certain groups will need to submit this, whereas others will not.
        For the groups which do not need to submit a liability return, the value will be nil.
        For the groups which do need to submit an annual liability return, then the information found in the array will need to be populated.
    uk.gov.hmrc.pillar2submissionapi.models.globeinformationreturn.GIRSuccess:
      properties:
        processingDate:
          type: string
      required:
        - processingDate
    uk.gov.hmrc.pillar2submissionapi.models.globeinformationreturn.GIRSubmission:
      properties:
        accountingPeriodFrom:
          type: string
          format: date
        accountingPeriodTo:
          type: string
          format: date
      required:
        - accountingPeriodFrom
        - accountingPeriodTo
    uk.gov.hmrc.pillar2submissionapi.models.response.Pillar2ErrorResponse:
      properties:
        code:
          type: string
        message:
          type: string
      required:
        - code
        - message
    uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisation:
      properties:
        orgDetails:
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.OrgDetails"
        accountingPeriod:
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.AccountingPeriod"
        testData:
          nullable: true
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.TestData"
        lastUpdated:
          type: string
          format: date-time
      required:
        - orgDetails
        - accountingPeriod
        - lastUpdated
    uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisationWithId:
      properties:
        pillar2Id:
          type: string
          description: "A unique identifier for Pillar 2. Each company will have a different ID, allocated by HMRC."
        organisation:
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisation"
      required:
        - pillar2Id
        - organisation
    uk.gov.hmrc.pillar2submissionapi.models.organisation.AccountActivityScenario:
      type: string
      enum:
        - DTT_CHARGE
        - FULLY_PAID_CHARGE
        - FULLY_PAID_CHARGE_WITH_SPLIT_PAYMENTS
        - REPAYMENT_INTEREST
        - DTT_DETERMINATION
        - DTT_IIR_UTPR
        - ACCRUED_INTEREST
        - DTT_IIR_UTPR_INTEREST
        - DTT_IIR_UTPR_DETERMINATION
        - DTT_IIR_UTPR_DISCOVERY
        - DTT_IIR_UTPR_OVERPAID_CLAIM
        - UKTR_DTT_UKTR_MTT_LATE_FILING_PENALTY
        - ORN_GIR_DTT_UKTR_MTT_LATE_FILING_PENALTY
        - POTENTIAL_LOST_REVENUE_PENALTY
        - SCHEDULE_36_PENALTY
        - RECORD_KEEPING_PENALTY
        - REPAYMENT_CREDIT
        - INTEREST_REPAYMENT_CREDIT
    uk.gov.hmrc.pillar2submissionapi.models.organisation.TestData:
      properties:
        accountActivityScenario:
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.AccountActivityScenario"
      required:
        - accountActivityScenario
    uk.gov.hmrc.pillar2submissionapi.models.organisation.AccountingPeriod:
      properties:
        startDate:
          type: string
          format: date
          description: The start date of the accounting period.
        endDate:
          type: string
          format: date
          description: The end date of the accounting period.
        underEnquiry:
          type: boolean
          nullable: true
          description: "Specifies whether an HMRC enquiry into the group is underway. The group will have been notified before the enquiry begins. If a group is under enquiry, then the value will be `true`. In this time period, amendments to a UKTR and submission of a BTN may not be processed depending on the outcome of the enquiry."
      required:
        - startDate
        - endDate
      description: 'The period in which a group would be submitting their Pillar 2 returns to HMRC. This period of time varies amongst different businesses. It is effectively their "business year", and is expected to be the same as their accounting period with Pillar 2.'
    uk.gov.hmrc.pillar2submissionapi.models.organisation.OrgDetails:
      properties:
        domesticOnly:
          type: boolean
          description: "Specifies whether a group only operates in the UK, or whether it has any companies within it which operate abroad. For a company that is registered in the UK but has offices which are based abroad, the value will be `false`."
        organisationName:
          type: string
          description: The full name of a company registered on Pillar 2.
        registrationDate:
          type: string
          format: date
          description: The date that a group successfully registers and subscribes to Pillar 2 with HMRC.
      required:
        - domesticOnly
        - organisationName
        - registrationDate
      description: Contains information about an organisation that is registered to Pillar 2.
    uk.gov.hmrc.pillar2submissionapi.models.organisation.TestOrganisationRequest:
      properties:
        orgDetails:
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.OrgDetails"
        accountingPeriod:
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.AccountingPeriod"
        testData:
          nullable: true
          $ref: "#/components/schemas/uk.gov.hmrc.pillar2submissionapi.models.organisation.TestData"
      required:
        - orgDetails
        - accountingPeriod
    Submission:
      properties:
        submissionType:
          type: string
          enum:
            - UKTR_CREATE
            - UKTR_AMEND
            - ORN_CREATE
            - ORN_AMEND
            - BTN
            - GIR
        receivedDate:
          type: string
          format: date-time
        country:
          type: string
          nullable: true
      required:
        - submissionType
        - receivedDate
    AccountingPeriodDetails:
      description: "Contains the details of an accounting period. This includes when the period starts and ends, alongside any obligations and submissions."
      properties:
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        dueDate:
          type: string
          format: date
        underEnquiry:
          type: boolean
        obligations:
          type: array
          items:
            $ref: "#/components/schemas/Obligation"
      required:
        - startDate
        - endDate
        - dueDate
        - underEnquiry
        - obligations
    Obligation:
      properties:
        obligationType:
          type: string
          enum:
            - UKTR
            - GIR
        status:
          type: string
          enum:
            - Open
            - Fulfilled
        canAmend:
          type: boolean
        submissions:
          type: array
          items:
            $ref: "#/components/schemas/Submission"
      required:
        - obligationType
        - status
        - canAmend
        - submissions
    ObligationsAndSubmissionsSuccessResponse:
      properties:
        processingDate:
          type: string
          format: date-time
        accountingPeriodDetails:
          type: array
          items:
            $ref: "#/components/schemas/AccountingPeriodDetails"
      required:
        - processingDate
        - accountingPeriodDetails
  examples:
    requests.TestOrganisationRequestExample:
      summary: Request example
      value:
        orgDetails:
          domesticOnly: true
          organisationName: Test Organisation Ltd
          registrationDate: 2024-01-01
        accountingPeriod:
          startDate: 2024-01-01
          endDate: 2024-12-31
        testData:
          accountActivityScenario: DTT_CHARGE
    responses.TestOrganisationResponseExample:
      summary: Response example
      value:
        pillar2Id: XAPLR1234567890
        organisation:
          orgDetails:
            domesticOnly: true
            organisationName: Test Organisation Ltd
            registrationDate: 2024-01-01
          accountingPeriod:
            startDate: 2024-01-01
            endDate: 2024-12-31
          testData:
            accountActivityScenario: DTT_CHARGE
          lastUpdated: 2024-01-01T12:00:00Z
    responses.AccountActivity.DttCharge:
      summary: DTT_CHARGE - Standard outstanding DTT debit charge
      value:
        success:
          processingDate: 2026-01-27T12:06:28.342412Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 UK Tax Return Pillar 2 DTT
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: X123456789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 10000
              outstandingAmount: 10000
    responses.AccountActivity.FullyPaidCharge:
      summary: FULLY_PAID_CHARGE - Charge fully cleared by one payment
      value:
        success:
          processingDate: 2026-01-27T12:06:28.427623Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 UK Tax Return Pillar 2 DTT
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: X123456789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 10000
              outstandingAmount: 10000
              clearedAmount: 10000
              clearingDetails:
                - transactionDesc: On Account Pillar 2 (Payment on Account)
                  dueDate: 2027-06-30
                  amount: 10000
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Payment
              transactionDesc: On Account Pillar 2 (Payment on Account)
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 10000
              clearedAmount: 10000
              clearingDetails:
                - transactionDesc: Pillar 2 UK Tax Return Pillar 2 DTT
                  chargeRefNo: X123456789012
                  dueDate: 2027-06-30
                  amount: 10000
                  clearingDate: 2026-01-27
                  clearingReason: Allocated to Charge
    responses.AccountActivity.FullyPaidChargeWithSplitPayments:
      summary: FULLY_PAID_CHARGE_WITH_SPLIT_PAYMENTS - Charge cleared by two payments
      value:
        success:
          processingDate: 2026-01-27T12:06:28.526651Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 UK Tax Return Pillar 2 DTT
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: X123456789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 10000
              clearedAmount: 10000
              clearingDetails:
                - transactionDesc: On Account Pillar 2 (Payment on Account)
                  dueDate: 2027-06-30
                  amount: 5000
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
                - transactionDesc: On Account Pillar 2 (Payment on Account)
                  dueDate: 2027-06-30
                  amount: 5000
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Payment
              transactionDesc: On Account Pillar 2 (Payment on Account)
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 5000
              clearedAmount: 5000
              clearingDetails:
                - transactionDesc: Pillar 2 UK Tax Return Pillar 2 DTT
                  chargeRefNo: X123456789012
                  dueDate: 2027-06-30
                  amount: 10000
                  clearingDate: 2026-01-27
                  clearingReason: Allocated to Charge
            - transactionType: Payment
              transactionDesc: On Account Pillar 2 (Payment on Account)
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 5000
              clearedAmount: 5000
              clearingDetails:
                - transactionDesc: Pillar 2 UK Tax Return Pillar 2 DTT
                  chargeRefNo: X123456789012
                  dueDate: 2027-06-30
                  amount: 10000
                  clearingDate: 2026-01-27
                  clearingReason: Allocated to Charge
    responses.AccountActivity.RepaymentInterest:
      summary: REPAYMENT_INTEREST - Credit for repayment interest
      value:
        success:
          processingDate: 2026-01-27T12:06:28.63985Z
          transactionDetails:
            - transactionType: Credit
              transactionDesc: Pillar 2 UKTR RPI Pillar 2 OECD RPI
              chargeRefNo: XR23456789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: -100
              clearedAmount: -100
              clearingDetails:
                - transactionDesc: Pillar 2 UK Tax Return Pillar 2 DTT
                  chargeRefNo: X123456789012
                  dueDate: 2027-06-30
                  amount: 100
                  clearingDate: 2026-01-27
                  clearingReason: Allocated to Charge
    responses.AccountActivity.DttDetermination:
      summary: DTT_DETERMINATION - Pillar 2 DTT Determination debit
      value:
        success:
          processingDate: 2026-01-27T12:06:28.722149Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 Determination Pillar 2 DTT
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XDT3456789698
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 10000
              outstandingAmount: 10000
    responses.AccountActivity.DttIirUtpr:
      summary: DTT_IIR_UTPR - Three debit kinds with partial payment
      value:
        success:
          processingDate: 2026-01-27T12:06:28.80795Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 UKTR Pillar 2 UKTR DTT
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XDT3456789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 3100
              clearedAmount: 3100
              clearingDetails:
                - transactionDesc: Pillar 2 UKTR Pillar 2 UKTR DTT
                  dueDate: 2027-06-30
                  amount: 3100
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 UKTR Pillar 2 UKTR IIR
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XDT3456789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 100
              outstandingAmount: 50
              clearedAmount: 50
              clearingDetails:
                - transactionDesc: Pillar 2 UKTR Pillar 2 UKTR IIR
                  dueDate: 2027-06-30
                  amount: 50
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 UKTR Pillar 2 UKTR UTPR
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XDT3456789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 100
              outstandingAmount: 100
    responses.AccountActivity.AccruedInterest:
      summary: ACCRUED_INTEREST - Unpaid debit accruing interest
      value:
        success:
          processingDate: 2026-01-27T12:06:28.931166Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 Determination Pillar 2 Determination IIR
              startDate: 2026-01-01
              endDate: 2026-12-31
              accruedInterest: 35
              chargeRefNo: XDT3456789055
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 3100
              outstandingAmount: 3100
    responses.AccountActivity.DttIirUtprInterest:
      summary: DTT_IIR_UTPR_INTEREST - Three interest debit kinds
      value:
        success:
          processingDate: 2026-01-27T12:06:29.019924Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 UKTR Interest UKTR DTT interest
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XIN3456789642
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 350
              outstandingAmount: 150
              clearedAmount: 200
              clearingDetails:
                - transactionDesc: Pillar 2 UKTR Interest UKTR DTT interest
                  dueDate: 2027-06-30
                  amount: 200
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 UKTR Interest UKTR IIR interest
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XIN3456789642
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 150
              clearedAmount: 150
              clearingDetails:
                - transactionDesc: Pillar 2 UKTR Interest UKTR IIR interest
                  dueDate: 2027-06-30
                  amount: 150
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 UKTR Interest UKTR UTPR interest
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XIN3556789642
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 35
              outstandingAmount: 35
    responses.AccountActivity.DttIirUtprDetermination:
      summary: DTT_IIR_UTPR_DETERMINATION - Three determination debits
      value:
        success:
          processingDate: 2026-01-27T12:06:29.099202Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 Determination Pillar 2 Determination DTT
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XDT3556789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 310000
              clearedAmount: 310000
              clearingDetails:
                - transactionDesc: Pillar 2 Determination Pillar 2 Determination DTT
                  dueDate: 2027-06-30
                  amount: 310000
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 Determination Pillar 2 Determination IIR
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XDT3556789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 21250
              outstandingAmount: 10000
              clearedAmount: 11250
              clearingDetails:
                - transactionDesc: Pillar 2 Determination Pillar 2 Determination IIR
                  dueDate: 2027-06-30
                  amount: 11250
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 Determination Pillar 2 Determination UTPR
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XDT3456789012
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 1125
              outstandingAmount: 1000
              clearedAmount: 125
              clearingDetails:
                - transactionDesc: Pillar 2 Determination Pillar 2 Determination UTPR
                  dueDate: 2027-06-30
                  amount: 125
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
    responses.AccountActivity.DttIirUtprDiscovery:
      summary: DTT_IIR_UTPR_DISCOVERY - Three discovery debits
      value:
        success:
          processingDate: 2026-01-27T12:06:29.243214Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 Discovery Assessment Pillar 2 Discovery Assmt DTT
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XD23456789779
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 350000
              clearedAmount: 350000
              clearingDetails:
                - transactionDesc: Pillar 2 Discovery Assessment Pillar 2 Discovery Assmt DTT
                  dueDate: 2027-06-30
                  amount: 350000
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 Discovery Assessment Pillar 2 Discovery Assmt IIR
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XD23456789779
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 3000
              outstandingAmount: 2000
              clearedAmount: 1000
              clearingDetails:
                - transactionDesc: Pillar 2 Discovery Assessment Pillar 2 Discovery Assmt IIR
                  dueDate: 2027-06-30
                  amount: 1000
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 Discovery Assessment Pillar 2 Discovery Assmt UTPR
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XD23456789779
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 3000
              outstandingAmount: 2000
    responses.AccountActivity.DttIirUtprOverpaidClaim:
      summary: DTT_IIR_UTPR_OVERPAID_CLAIM - Three debits for appeals
      value:
        success:
          processingDate: 2026-01-27T12:06:29.374836Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 Overpaid Claim Assmt Pillar2 Overpaid Cl Assmt DTT
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XOC3456789456
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 6100
              outstandingAmount: 6100
              standOverAmount: 6100
              appealFlag: true
            - transactionType: Debit
              transactionDesc: Pillar 2 Overpaid Claim Assmt Pillar2 Overpaid Cl Assmt IIR
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XOC3456789456
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 5000
              outstandingAmount: 2500
              clearedAmount: 2500
              clearingDetails:
                - transactionDesc: Pillar 2 Overpaid Claim Assmt Pillar2 Overpaid Cl Assmt IIR
                  dueDate: 2027-06-30
                  amount: 2500
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 Overpaid Claim Assmt Pillar2 Overpaid Cl Assmt UTPR
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XOC3456789456
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 4000
              outstandingAmount: 4000
    responses.AccountActivity.UktrDttLateFilingPenalty:
      summary: UKTR_DTT_UKTR_MTT_LATE_FILING_PENALTY - Late UKTR penalties
      value:
        success:
          processingDate: 2026-01-27T12:06:29.445579Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 UKTR DTT LFP Pillar 2 UKTR DTT LFP
              startDate: 2026-01-01
              endDate: 2026-12-31
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 100
              clearedAmount: 100
              clearingDetails:
                - transactionDesc: Pillar 2 UKTR DTT LFP Pillar 2 UKTR DTT LFP
                  dueDate: 2027-06-30
                  amount: 100
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 UKTR MTT LFP Pillar 2 UKTR MTT LFP
              startDate: 2026-01-01
              endDate: 2026-12-31
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 100
              outstandingAmount: 100
    responses.AccountActivity.OrnGirLateFilingPenalty:
      summary: ORN_GIR_DTT_UKTR_MTT_LATE_FILING_PENALTY - Late ORN/GIR penalties
      value:
        success:
          processingDate: 2026-01-27T12:06:29.514485Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 ORN/GIR DTT LFP Pillar 2 ORN/GIR DTT LFP
              startDate: 2026-01-01
              endDate: 2026-12-31
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 100
              clearedAmount: 100
              clearingDetails:
                - transactionDesc: Pillar 2 ORN/GIR DTT LFP Pillar 2 ORN/GIR DTT LFP
                  dueDate: 2027-06-30
                  amount: 100
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
            - transactionType: Debit
              transactionDesc: Pillar 2 ORN/GIR MTT LFP Pillar 2 ORN/GIR MTT LFP
              startDate: 2026-01-01
              endDate: 2026-12-31
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 100
              outstandingAmount: 50
              clearedAmount: 50
              clearingDetails:
                - transactionDesc: Pillar 2 ORN/GIR MTT LFP Pillar 2 ORN/GIR MTT LFP
                  dueDate: 2027-06-30
                  amount: 50
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
    responses.AccountActivity.PotentialLostRevenuePenalty:
      summary: POTENTIAL_LOST_REVENUE_PENALTY - Lost revenue penalty
      value:
        success:
          processingDate: 2026-01-27T12:06:29.577765Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 Potential Lost Rev Pen
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XIN3456789011
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 45000
              outstandingAmount: 15000
              clearedAmount: 30000
              clearingDetails:
                - transactionDesc: Pillar 2 Potential Lost Rev Pen
                  dueDate: 2027-06-30
                  amount: 30000
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
    responses.AccountActivity.Schedule36Penalty:
      summary: SCHEDULE_36_PENALTY - Schedule 36 penalty
      value:
        success:
          processingDate: 2026-01-27T12:06:29.649088Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Sch 36 penalty
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XIN3456789444
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 3500
              outstandingAmount: 500
              clearedAmount: 3000
              clearingDetails:
                - transactionDesc: Sch 36 penalty
                  dueDate: 2027-06-30
                  amount: 3000
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
    responses.AccountActivity.RecordKeepingPenalty:
      summary: RECORD_KEEPING_PENALTY - Record keeping penalty
      value:
        success:
          processingDate: 2026-01-27T12:06:29.711542Z
          transactionDetails:
            - transactionType: Debit
              transactionDesc: Pillar 2 Record Keeping Pen Pillar 2 Record Keeping Pen
              startDate: 2026-01-01
              endDate: 2026-12-31
              chargeRefNo: XIN3456789898
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: 3500
              clearedAmount: 3500
              clearingDetails:
                - transactionDesc: Pillar 2 Record Keeping Pen Pillar 2 Record Keeping Pen
                  dueDate: 2027-06-30
                  amount: 3500
                  clearingDate: 2026-01-27
                  clearingReason: Cleared by Payment
    responses.AccountActivity.RepaymentCredit:
      summary: REPAYMENT_CREDIT - Credit from UKTR submission
      value:
        success:
          processingDate: 2026-01-27T12:06:29.774264Z
          transactionDetails:
            - transactionType: Credit
              transactionDesc: Pillar 2 UKTR Repayment Pillar 2 UKTR Repayment
              chargeRefNo: XR23456789014
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: -10000
              outstandingAmount: -10000
    responses.AccountActivity.InterestRepaymentCredit:
      summary: INTEREST_REPAYMENT_CREDIT - Interest repayment credit
      value:
        success:
          processingDate: 2026-01-27T12:06:29.837042Z
          transactionDetails:
            - transactionType: Credit
              transactionDesc: Pillar 2 UKTR RPI Pillar 2 UKTR RPI
              chargeRefNo: XR23456789000
              transactionDate: 2026-01-27
              dueDate: 2027-06-30
              originalAmount: -100
              outstandingAmount: -100
    requests.BTNRequestExample:
      summary: Request example
      value:
        accountingPeriodFrom: 2024-01-01
        accountingPeriodTo: 2024-12-31
    requests.ORNRequestExample:
      summary: Request example
      value:
        accountingPeriodFrom: 2024-01-01
        accountingPeriodTo: 2024-12-31
        filedDateGIR: 2025-01-10
        countryGIR: US
        reportingEntityName: Newco PLC
        TIN: US12345678
        issuingCountryTIN: US
    responses.BTNSuccessResponseExample:
      summary: Success response
      value:
        processingDate: 2026-06-26T09:26:17Z
    responses.CreateTestGlobeInformationReturnResponseExample:
      summary: Success response
      value:
        processingDate: 2026-06-26T09:26:17Z
    requests.CreateTestGlobeInformationReturnRequestExample:
      summary: Request example
      value:
        accountingPeriodFrom: 2024-01-01
        accountingPeriodTo: 2024-12-31
    requests.UKTRNilReturnMneAndUk:
      summary: Nil Return - MNE and UK
      value:
        accountingPeriodFrom: 2024-01-01
        accountingPeriodTo: 2024-12-31
        obligationMTT: true
        electionUKGAAP: false
        liabilities:
          returnType: NIL_RETURN
    requests.UKTRNilReturnDomesticOnlyWithUkGaap:
      summary: Nil Return - Domestic Only with UK GAAP
      value:
        accountingPeriodFrom: 2024-01-01
        accountingPeriodTo: 2024-12-31
        obligationMTT: false
        electionUKGAAP: true
        liabilities:
          returnType: NIL_RETURN
    requests.UKTRNilReturnDomesticOnlyWithoutUkGaap:
      summary: Nil Return - Domestic Only without UK GAAP
      value:
        accountingPeriodFrom: 2024-01-01
        accountingPeriodTo: 2024-12-31
        obligationMTT: false
        electionUKGAAP: false
        liabilities:
          returnType: NIL_RETURN
    requests.UKTRLiabilityReturnMneAndUkWithOneEntity:
      summary: Liability Return - MNE and UK with 1 Entity
      value:
        accountingPeriodFrom: 2025-04-06
        accountingPeriodTo: 2026-04-05
        obligationMTT: true
        electionUKGAAP: false
        liabilities:
          electionDTTSingleMember: false
          electionUTPRSingleMember: false
          numberSubGroupDTT: 4
          numberSubGroupUTPR: 5
          totalLiability: 14401.49
          totalLiabilityDTT: 5000.99
          totalLiabilityIIR: 3400
          totalLiabilityUTPR: 6000.5
          liableEntities:
            - ukChargeableEntityName: Newco PLC
              idType: CRN
              idValue: xyz
              amountOwedDTT: 5000.99
              amountOwedIIR: 3400
              amountOwedUTPR: 6000.5
    requests.UKTRLiabilityReturnMneAndUkWithTwoEntities:
      summary: Liability Return - MNE and UK with 2 Entities
      value:
        accountingPeriodFrom: 2025-04-06
        accountingPeriodTo: 2026-04-05
        obligationMTT: true
        electionUKGAAP: false
        liabilities:
          electionDTTSingleMember: false
          electionUTPRSingleMember: false
          numberSubGroupDTT: 4
          numberSubGroupUTPR: 5
          totalLiability: 40968.88
          totalLiabilityDTT: 26567.89
          totalLiabilityIIR: 5000
          totalLiabilityUTPR: 9400.99
          liableEntities:
            - ukChargeableEntityName: Newco PLC
              idType: CRN
              idValue: xyz
              amountOwedDTT: 4567
              amountOwedIIR: 3000
              amountOwedUTPR: 4000.99
            - ukChargeableEntityName: Conew PLC
              idType: UTR
              idValue: xyz
              amountOwedDTT: 22000.89
              amountOwedIIR: 2000
              amountOwedUTPR: 5400
    requests.UKTRLiabilityReturnDomesticOnlyOneEntityAndUkGaap:
      summary: Liability Return - Domestic Only with 1 Entity and UK GAAP
      value:
        accountingPeriodFrom: 2025-01-01
        accountingPeriodTo: 2026-12-31
        obligationMTT: false
        electionUKGAAP: true
        liabilities:
          electionDTTSingleMember: false
          electionUTPRSingleMember: false
          numberSubGroupDTT: 4
          numberSubGroupUTPR: 5
          totalLiability: 26567.89
          totalLiabilityDTT: 26567.89
          totalLiabilityIIR: 0
          totalLiabilityUTPR: 0
          liableEntities:
            - ukChargeableEntityName: Conew PLC
              idType: UTR
              idValue: xyz
              amountOwedDTT: 26567.89
              amountOwedIIR: 0
              amountOwedUTPR: 0
    requests.UKTRLiabilityReturnDomesticOnlyTwoEntities:
      summary: Liability Return - Domestic Only with 2 Entities
      value:
        accountingPeriodFrom: 2025-04-06
        accountingPeriodTo: 2026-04-05
        obligationMTT: false
        electionUKGAAP: false
        liabilities:
          electionDTTSingleMember: false
          electionUTPRSingleMember: false
          numberSubGroupDTT: 4
          numberSubGroupUTPR: 5
          totalLiability: 10000
          totalLiabilityDTT: 10000
          totalLiabilityIIR: 0
          totalLiabilityUTPR: 0
          liableEntities:
            - ukChargeableEntityName: Newco PLC
              idType: CRN
              idValue: xyz
              amountOwedDTT: 5000
              amountOwedIIR: 0
              amountOwedUTPR: 0
            - ukChargeableEntityName: Conew PLC
              idType: CRN
              idValue: xyz
              amountOwedDTT: 5000
              amountOwedIIR: 0
              amountOwedUTPR: 0
    responses.UKTRSuccessResponseWithCrnExample:
      summary: Liability Success response
      value:
        processingDate: 2026-06-26T09:26:17Z
        formBundleNumber: 119000004320
        chargeReference: 2347913284601
    responses.UKTRSuccessResponseWithoutCrnExample:
      summary: Nil Return Success response
      value:
        processingDate: 2026-06-26T09:26:17Z
        formBundleNumber: 119000004320
    responses.UKTRNilReturnResponseExample:
      summary: Request example for Domestic only with UK GAAP Nil Return
      value:
        accountingPeriodFrom: 2024-01-01
        accountingPeriodTo: 2024-12-31
        obligationMTT: false
        electionUKGAAP: true
        liabilities:
          returnType: NIL_RETURN
    responses.ORNSuccessResponseExample:
      summary: ORN Submit/Amend Success response
      value:
        processingDate: 2026-06-26T09:26:17Z
        formBundleNumber: 119000004320
    responses.ORNRetrieveSuccessResponseExample:
      summary: ORN Retrieve Success response
      value:
        processingDate: 2025-03-26T09:26:17Z
        accountingPeriodFrom: 2024-01-01
        accountingPeriodTo: 2024-12-31
        filedDateGIR: 2025-01-10
        countryGIR: US
        reportingEntityName: Newco PLC
        TIN: US12345678
        issuingCountryTIN: US
    errors.TestOrg.NotFound:
      summary: Test organisation not found
      value:
        code: 404
        message: "Organisation not found for pillar2Id: XAPLR1234567890"
    errors.TestOrg.EndpointDisabled:
      summary: Test endpoints not available
      value:
        code: TEST_ENDPOINT_DISABLED
        message: Test endpoints are not available in this environment
    errors.MissingCredentials:
      summary: Missing Credentials
      value:
        code: MISSING_CREDENTIALS
        message: Authentication information is not provided
    errors.InvalidCredentials:
      summary: Invalid Credentials
      value:
        code: INVALID_CREDENTIALS
        message: Invalid Authentication information provided
    errors.InvalidDateRange:
      summary: Invalid date range
      value:
        code: INVALID_DATE_RANGE
        message: Invalid date range
    errors.InvalidDateFormat:
      summary: Invalid date format
      value:
        code: INVALID_DATE_FORMAT
        message: Invalid date format
    errors.InvalidJson:
      summary: Invalid JSON payload
      value:
        code: INVALID_JSON
        message: Invalid JSON payload
    errors.EmptyBody:
      summary: Empty request body
      value:
        code: EMPTY_REQUEST_BODY
        message: Empty request body
    errors.Submission.InvalidRequest:
      summary: Invalid request
      value:
        code: "003"
        message: Request could not be processed
    errors.Submission.NoSubscriptionData:
      summary: No subscription data
      value:
        code: "004"
        message: No Pillar2 subscription found for -pillar2Id
    errors.Submission.MissingPillar2Header:
      summary: Missing Pillar 2 header
      value:
        code: MISSING_HEADER
        message: Please provide the X-Pillar2-Id header
    errors.IncorrectHeaderValue:
      summary: Pillar 2 header does not match that in the bearer token
      value:
        code: INCORRECT_HEADER_VALUE
        message: X-Pillar2-Id Header value does not match the bearer token
    errors.Submission.GenericServerError:
      summary: Generic server error
      value:
        code: 500
        message: Internal Server Error
    errors.InvalidScope:
      summary: Invalid scope
      value:
        code: INVALID_SCOPE
        message: Can not access the required resource. Ensure this token has all the required scopes.
    errors.Submission.InvalidReturn:
      summary: Invalid return
      value:
        code: "093"
        message: Invalid Return
    errors.Submission.TaxObligationFulfilled:
      summary: Tax obligation fulfilled
      value:
        code: "044"
        message: Tax Obligation already fulfilled
    errors.Submission.NoActiveSubscription:
      summary: No active subscription
      value:
        code: "063"
        message: Business Partner does not have an Active Subscription for this Regime
    errors.Submission.DuplicateSubmission:
      summary: Duplicate submission
      value:
        code: "004"
        message: Duplicate submission
    errors.Submission.InvalidUTPR:
      summary: Invalid UTPR Election
      value:
        code: "095"
        message: Invalid UTPR Election
    errors.Submission.InvalidTotalLiabilityIIR:
      summary: Invalid Total Liability IIR
      value:
        code: "097"
        message: Invalid Total Liability IIR
    errors.Submission.InvalidDTT:
      summary: Invalid DTT Election
      value:
        code: "094"
        message: Invalid DTT Election
    errors.Submission.InvalidTotalLiabilityUTPR:
      summary: Invalid Total Liability UTPR
      value:
        code: "099"
        message: Invalid Total Liability UTPR
    errors.Submission.InvalidTotalLiability:
      summary: Invalid Total Liability
      value:
        code: "096"
        message: Invalid Total Liability
    errors.Submission.InvalidTotalLiabilityDTT:
      summary: Invalid Total Liability DTT
      value:
        code: "098"
        message: Invalid Total Liability DTT
    errors.Submission.AccountingPeriodUnderEnquiry:
      summary: Accounting Period Under Enquiry
      value:
        code: 100
        message: Accounting period under enquiry
    errors.Submission.NoDataFound:
      summary: No data found
      value:
        code: "014"
        message: No data found
    errors.Retrieval.NotFound:
      summary: No data found
      value:
        code: NOT_FOUND
        message: The requested ORN could not be found
  securitySchemes:
    userRestricted:
      type: oauth2
      description: |
        HMRC supports OAuth 2.0 for authenticating user restricted API requests using an OAuth 2.0 Bearer Token in the AUTHORIZATION header.
        Please see the [developer hub](https://developer.service.hmrc.gov.uk/api-documentation/docs/authorisation/user-restricted-endpoints) for more details.
      flows:
        authorizationCode:
          authorizationUrl: https://api.service.hmrc.gov.uk/oauth/authorize
          tokenUrl: https://api.service.hmrc.gov.uk/oauth/token
          refreshUrl: https://api.service.hmrc.gov.uk/oauth/refresh
          scopes:
            read:pillar2: Read data related to Pillar2 subscription
            write:pillar2: Write data related to Pillar2 subscription
servers:
  - url: https://test-api.service.hmrc.gov.uk
    description: Sandbox
  - url: https://api.service.hmrc.gov.uk
    description: Production
